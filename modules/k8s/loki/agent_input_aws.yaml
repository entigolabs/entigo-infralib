global:
  aws:
    account: "{{ .toutput.eks.account }}"
    clusterOIDC: "{{ .toutput.eks.oidc_provider }}"
    region: "{{ .toutput.eks.region }}"
    kmsKeyId: "{{ .toptout.kms.data_alias_arn }}"
  bucketName: "{{ .config.prefix }}-{{ .module.name }}-logs"
loki:
  gateway:
    ingress:
      hosts:
        - host: "{{ .module.name }}.{{ .toutput.route53.int_domain }}"
          paths:
            - path: "/"
              pathType: "Prefix"
  loki:
    storage:
      s3:
        region: "{{ .toutput.eks.region }}"
      bucketNames:
        chunks: "{{ .config.prefix }}-{{ .module.name }}-logs"
        ruler: "{{ .config.prefix }}-{{ .module.name }}-logs"
        admin: "{{ .config.prefix }}-{{ .module.name }}-logs"
    storage_config:
      aws:
        region: "{{ .toutput.eks.region }}"
        bucketnames: "{{ .config.prefix }}-{{ .module.name }}-logs"
